import axios from '../../../../node_modules/axios';
import songData from './songsData.json'
const fs = require('fs');

const sleep = (ms: any) => {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function load(){
  let final = []
  for (let i = 0; i < songData.length; i++){
    const albumId = songData[i].albumId
    const songs = []
    for(let j = 0; j < songData[i].data.length; j++){
      const {data} = await axios.get(`https://api.deezer.com/track/${songData[i].data[j].id}`)
      songs.push(data)
      console.log(data)
      await sleep(900)
    }
    const obj = {albumId: albumId, data: songs}
    final.push(obj)
  }
  await fs.writeFileSync("thing.json", JSON.stringify(final));
}

let test = [
  1,
  15275625,
  1129,
  4416052,
  1446,
  226,
  77974,
  13,
  397,
  256493,
  417645,
  763,
  359,
  4877643,
  2533,
  66,
  737,
  8039009,
  3802,
  1196488,
  384236,
  14456487,
  1352674,
  1041159,
  8923,
  5611740,
  6474027,
  13631667,
  7605110,
  384995,
  27,
  145,
  1363197,
  69986032,
  4674484,
  4694728,
  4338602,
  525046,
  1309,
  577666,
  15929,
  103,
  9913990,
  3933641,
  7072729,
  10385666,
  2281211,
  282118,
  5109534,
  647437,
  4834218,
  8005230,
  12041350,
  13234233,
  10087002,
  9262400,
  982471,
  1486761,
  13922163,
  9285150,
  4977670,
  69212362,
  1003272,
  12008088,
  49163791,
  160,
  15691,
  1424602,
  4479,
  7343,
  4494623,
  380955,
  615238,
  330,
  412,
  247379,
  520,
  5002,
  188,
  105,
  8556,
  5128869,
  1350335,
  254,
  1147,
  9112,
  12178,
  4962010,
  1057597,
  4925172,
  7448666,
  1590752,
  1562681,
  165930,
  362326,
  4495513,
  152629,
  3,
  313,
  1622596,
  382937,
  144227,
  15427,
  5603027,
  9776678,
  1188009,
  372635,
  1141019,
  5346966,
  311820,
  1249649,
  426684,
  93674,
  16,
  1353625,
  345052,
  13098657,
  1611773,
  1038426,
  11559031,
  12029862,
  1272674,
  7961888,
  5844239,
  11289472,
  5412407,
  4937383,
  4860761,
  288166,
  4400138,
  51204222,
  13864157,
  5245183,
  48995601,
  107753562,
  1547598,
  7101343,
  1018354,
  5059044,
  11363014,
  1416675,
  1166311,
  240427,
  67547712,
  5297021,
  11815065,
  12585386,
  3922661,
  8613614,
  81285,
  157213512,
  45,
  1453376,
  10684363,
  5995,
  383528,
  4050205,
  1194083,
  74309,
  407188,
  554792,
  398521,
  81764332,
  13200787,
  68334,
  58447102,
  4698748,
  49197782,
  1170312,
  2829671,
  10189722,
  4056850,
  1217914,
  614223,
  12637039,
  10583405,
  517429,
  525643,
  48947801,
  14343187,
  1074021,
  3674271,
  9977062,
  10256642,
  4649104,
  8706544,
  5536564,
  100314362,
  58568762,
  12346612,
  4035046,
  8658114,
  10186978,
  78,
  4613635,
  75156,
  9019,
  17046,
  279082,
  4542250,
  1425767,
  5313805,
  15898,
  14033495,
  9845706,
  3839,
  7208392,
  1256393,
  5849210,
  8043203,
  5578942,
  8409650,
  5531258,
  837,
  4344192,
  5962948,
  9236850,
  2110321,
  101793092,
  7,
  290,
  91,
  10803980,
  1042268,
  70942,
  1417341,
  49544582,
  193162,
  472353,
  12607183,
  6622710,
  1236039,
  11152580,
  9219,
  78051492,
  68248772,
  77256312,
  78685792,
  10668885,
  4660899,
  4438587,
  54946772,
  14917949,
  11025346,
  5416089,
  4390053,
  10177296,
  4491456,
  9334770,
  326042,
  12487862,
  53825042,
  1020198
]

async function artist(){
  let final = []
  for (let i = 0; i < test.length; i++){
    const {data} = await axios.get(`https://api.deezer.com/artist/${test[i]}`)
    final.push(data)
    console.log(data)
    await sleep(900)
  }
  await fs.writeFileSync("artistDataNew.json", JSON.stringify(final));
}

// getData(songData)
// load()
artist()